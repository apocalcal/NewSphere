## **1. 문서 개요**

**본 문서는 AI 요약 기능의 목적, 프롬프트 설계 전략, Flask API 기반 구현 방식 및 마이크로서비스 아키텍처 내 처리 흐름을 체계적으로 설명합니다.**

## **2. 요약 기능 개요**

| **항목**      | **설명**                                                     |
| ------------- | ------------------------------------------------------------ |
| **목적**      | **뉴스 기사 본문을 요약하여 사용자의 뉴스 소비 효율성 향상** |
| **도입 이유** | **중복 뉴스 환경에서 핵심 정보만 빠르게 전달하기 위함**      |
| **적용 위치** | **요약봇, 뉴스레터, 추천 뉴스 설명 등**                      |
| **처리 방식** | **Flask 요약 API → 프롬프트 적용 → OpenAI 호출 → 요약 저장** |

## **3. 프롬프트 관리 구조**

| **구분**                  | **프롬프트 예시**                                                                | **설명**                          |
| ------------------------- | -------------------------------------------------------------------------------- | --------------------------------- |
| **AIBOT (3줄 요약)**      | **기사의 핵심 내용만 간단하게 3줄 요약해줘**                                     | **사용자 클릭 기반 요약봇**       |
| **NEWSLETTER (1줄 요약)** | **카톡 뉴스레터용으로 핵심만 1줄로 요약해줘**                                    | **카카오톡 뉴스레터 전송용 요약** |
| **관리구조**              | **Flask 내부의 PromptManager 클래스에서 유형(Type) 인덱스(Index) 방식으로 관리** |                                   |

## **4. 요약 처리 구조 및 흐름**

![{1A1BFC44-B588-4DE2-9AE2-C43089C0BC7A}.png](attachment:f567694c-bf06-463d-a497-435873a55066:1A1BFC44-B588-4DE2-9AE2-C43089C0BC7A.png)

1. **프론트엔드 → Spring 서버**사용자가 뉴스 요약 요청 / 뉴스 ID 및 요약 타입 전송
2. **Spring 서버 처리**요약 DB 확인 / 없을 경우 Flask API로 본문 + 프롬프트 요청
3. **Flask 서버 처리**프롬프트 로드 → OpenAI 호출 → 요약 생성 / 요약 결과 DB 저장 → Spring 서버 반환
4. **Spring 서버 후처리**요약 결과 DB 저장 / 사용자에게 요약 결과 전달 (웹 모달 또는 메시지)

## **5. 기술 스택**

| **구성 요소**       | **기술**                                                  |
| ------------------- | --------------------------------------------------------- |
| **AI 모델**         | **OpenAI GPT‑4.1 mini (대체: KoGPT / KoBART 가능)**       |
| **프롬프트 매니저** | **Flask 내 Python 클래스**                                |
| **API 호출**        | **POST /summary JSON { text, prompt }**                   |
| **결과 저장**       | **SQLAlchemy → 테이블 news_summary**                      |
| **연동 대상**       | **Spring (뉴스 서비스) / 뉴스레터 / React 프론트엔드 등** |

## **6. Flask API 예시**

### 요청 예시:

```jsx
POST /summary
Content‑Type: application/json
{
"text": "삼성전자는 2025년 2분기 실적 발표를 통해 연결 기준 매출 74조 원, 영업이익 10조 원을 기록했다고 6일 밝혔다. 이는 전년 동기 대비 각각 6%, 15% 증가한 수치다. 특히 반도체 부문은 글로벌 메모리 수요 회복과 인공지능(AI)용 고대역폭 메모리 수요 증가로 매출이 크게 늘었으며, 모바일 부문도 플래그십 모델 판매 호조에 힘입어 양호한 실적을 보였다. 삼성전자는 하반기에도 AI 반도체 수요 증가와 서버용 메모리 수요 회복세가 이어질 것으로 보고 있다. 또한, 차세대 반도체 기술 확보를 위한 연구개발(R&D) 투자도 지속할 계획이라고 밝혔다. 한편, 디스플레이 부문은 주요 고객사의 신규 스마트폰 출시에 맞춰 실적이 개선될 것으로 예상된다. 업계는 삼성전자의 실적 회복이 본격화됐다고 평가하며, 글로벌 반도체 시장의 회복 흐름과 맞물려 향후 성장세가 기대된다고 분석했다.",
"prompt": "기사의 핵심 내용만 3줄로 간결하게 요약해줘”
}

```

### **응답 예시:**

```jsx
{
"summary": "삼성전자가 2025년 2분기 실적에서 매출 74조 원, 영업이익 10조 원을 기록하며 전년 대비 각각 6%, 15% 증가했다.\nAI 및 서버용 메모리 수요 증가로 반도체 부문이 실적 개선을 견인했다.\n하반기에도 AI 수요 확대와 플래그십 스마트폰 판매 호조가 지속될 것으로 전망된다."
}
```

## **7. 향후 확장 가능성**

**분야별 프롬프트 커스터마이징 (정치 / IT / 경제 등)**

**사용자 맞춤 요약 제공 (사용자 관심 기반)**

**톤/어조 조절 프롬프트 도입 (친근체, 뉴스체, 공식체 등)**

**다국어 요약 기능 (한국어 -> 영어 요약 / 영어 -> 한국어 요약)**

## **8. 활용 케이스**

| **케이스**           | **설명**                                                              |
| -------------------- | --------------------------------------------------------------------- |
| **요약봇**           | **기사 상세 보기에서 버튼 클릭 → 3줄 요약 표시**                      |
| **뉴스레터**         | **카카오톡/이메일 뉴스레터 발송 전 본문 요약 삽입**                   |
| **추천 뉴스 카드**   | **썸네일/타이틀 옆에 1줄 요약 삽입 (피드 내 정보 밀도 향상)**         |
| **검색 결과 요약**   | **뉴스 검색 시, 각 결과 아래 요약문 표시 (클릭 유도)**                |
| **SNS 공유 콘텐츠**  | **뉴스 공유 시 자동 생성되는 요약문 삽입 (Twitter/X, Facebook 등)**   |
| **음성 콘텐츠 변환** | **요약문을 기반으로 TTS 음성 생성하여 팟캐스트 등으로 확장**          |
| **요약 아카이브**    | **같은 기사에 대해 시간 경과에 따른 요약 변화 추적**                  |
| **관리자 QA 확인용** | **뉴스 품질 검수용으로 자동 요약과 원문 비교 제공**                   |
| **스마트 알림/푸시** | **요약 기반 키워드 강조 알림 (관심 주제에 따라 푸시 내용 요약 제공)** |
| **AI 큐레이션 보조** | **추천 엔진에서 기사 그룹을 요약 비교하여 대표 기사 선정에 활용**     |

## 9. venv 가상 서버 설치 및 패키지 설치 명령어 (.env 설정)

Bash (macOS / Linux / Git Bash on Windows)
# 1) 가상환경 생성
python3 -m venv .venv

# 2) 가상환경 활성화
source .venv/bin/activate

# 3) 의존성 설치
pip install -r requirements.txt

# 4) 실행
python3 main.py     # (또는) FLASK_APP=main.py flask run --debug

# 5) 가상환경 비활성화
deactivate

CMD (명령 프롬프트, Windows)
:: 1) 가상환경 생성
py -m venv .venv

:: 2) 가상환경 활성화
.\.venv\Scripts\activate.bat

:: 3) 의존성 설치
pip install -r requirements.txt

:: 4) 실행
python main.py     :: (또는) set FLASK_APP=main.py & flask run --debug

:: 5) 가상환경 비활성화
deactivate

PowerShell (Windows)
# 1) 가상환경 생성
py -m venv .venv

# 2) (필요 시) 실행 정책 완화(현재 세션만)
Set-ExecutionPolicy -Scope Process -ExecutionPolicy RemoteSigned

# 3) 가상환경 활성화
.\.venv\Scripts\Activate.ps1

# 4) 의존성 설치
pip install -r requirements.txt

# 5) 실행
python .\main.py   # (또는) $env:FLASK_APP="main.py"; flask run --debug

# 6) 가상환경 비활성화
deactivate